# ozon-links-app
Сервис для создания сокращенных ссылок

### Принцип сокращения
Сокращение ссылок основано на приведении индентификтора ссылки из базы данных к системе счисления по основанию 62 [A..Za..z0..9]
* При получении длинной ссылки с помощью обработчика `/short`, она добавляется базу данных и по полученному идентификтора генерируется короткая ссылка
* При получении короткой ссылки с помощью обработчика `/long`, она декодируется в число и по полученному идентификтору возвращается полная ссылка

### База данных
Данные хранятся в БД PostgreSQL: одна таблица `links` с идентификторами и полными ссылками

## Запуск приложения
`docker-compose up`

* Приложение доступно на порте 6000
* При первом запуске база может долго разворачиваться

### Запросы

**/short**

Запрос:

```
curl -d '{"url":"http://google.com"}' -H "Content-Type: application/json" -X POST http://localhost:6000/short
```

Ответ:

```
'{"url":"localhost:6000/1Z"}'
```

**/long**

Запрос:
```
curl -d '{"url":"localhost:6000/1Z"}' -H "Content-Type: application/json" -X POST http://localhost:6000/long
```

Ответ:

```
'{"url":"http://google.com"}'
```

### Обработка ошибок
Приложение возвращает ответы с соответствующими кодами при следующих сценариях:
* При неверном формате запроса
* При неверном формате короткой ссылки
* При передачи неизвестной короткой ссылки
* При серверных ошибках


### Запросы к БД и сервису для проверки encode'ра / decode'ра идентификтора
```
insert into links values (269, 'http://test1.com');
```
(При наличии ссылки в БД подтягивается текущий ID)
```
curl -d '{"url":"http://test1.com"}' -H "Content-Type: application/json" -X POST http://localhost:6000/short
```
```
curl -d '{"url":"localhost:6000/4l"}' -H "Content-Type: application/json" -X POST http://localhost:6000/long
```




